# ═══════════════════════════════════════════════════════════════
# PFF - Production Fix Flow - Environment Configuration Template
# ═══════════════════════════════════════════════════════════════
#
# Copy this file to .env and fill with your environment-specific values
# NEVER commit .env to Git!
#
# To generate secure secrets, run:
#   python -c "import secrets; print(secrets.token_urlsafe(32))"
#

# ─── Redis Configuration ─────────────────────────────────────────
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
USE_REDIS=true  # Set to false on Windows or if Redis unavailable

# ─── Performance & Concurrency ───────────────────────────────────
# CPU/Threading limits (adjust based on your hardware)
DASK_DISTRIBUTED__WORKER__TIMEOUT=60s
DASK_DISTRIBUTED__WORKER__DAEMON=False
DASK_DISTRIBUTED__WORKER__MEMORY_LIMIT=4GB
DASK_DISTRIBUTED__COMM__TIMEOUTS__TCP=60s
DASK_DISTRIBUTED__COMM__TIMEOUTS__CONNECT=60s
DASK_DISTRIBUTED__CLIENT__HEARTBEAT_INTERVAL=10s

OMP_NUM_THREADS=10
MKL_NUM_THREADS=10
NUMEXPR_NUM_THREADS=10
OPENBLAS_NUM_THREADS=10
POLARS_MAX_THREADS=10

# ─── Python Configuration ────────────────────────────────────────
PYTHONIOENCODING=utf-8
PYTHONUTF8=1
PYTHONUNBUFFERED=1
PYTHONHASHSEED=42

# ─── ML/AI Configuration ─────────────────────────────────────────
SKLEARN_WARN_CONVERGENCE=False
SKLEARN_ENABLE_ARRAY_API=False

RAY_DISABLE_IMPORT_WARNING=1
RAY_OBJECT_STORE_ALLOW_SLOW_STORAGE=1
RAY_LOG_TO_STDERR=0

# ─── System Configuration ────────────────────────────────────────
FOR_DISABLE_CONSOLE_CTRL_HANDLER=1
SUBPROCESS_TIMEOUT=300

PFF_OPTIMIZED=True
PFF_SETUP_VERSION=2.1
PFF_SETUP_DATE=2025-10-18

# ─── Security (REQUIRED - Generate secure values!) ───────────────
# Generate with: python -c "import secrets; print('SECRET_KEY=' + secrets.token_urlsafe(32))"
SECRET_KEY=CHANGE_ME_GENERATE_SECURE_32_BYTE_KEY
API_KEY=CHANGE_ME_GENERATE_SECURE_32_BYTE_KEY
ACCESS_TOKEN_EXPIRE_MINUTES=30

# ─── PostgreSQL Database (REQUIRED) ──────────────────────────────
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=pff_production
POSTGRES_USER=pff_user
POSTGRES_PASSWORD=CHANGE_ME_GENERATE_SECURE_PASSWORD

# ─── Celery (Task Queue) ─────────────────────────────────────────
CELERY_BROKER_URL=redis://localhost:6379/0
CELERY_RESULT_BACKEND=redis://localhost:6379/1
CELERY_ACCEPT_CONTENT=["json"]
CELERY_TASK_SERIALIZER=json
CELERY_RESULT_SERIALIZER=json
CELERY_TIMEZONE=UTC
CELERY_TASK_ACKS_LATE=True
CELERY_TASK_REJECT_ON_WORKER_LOST=True
CELERY_TASK_DEFAULT_QUEUE=default

# ─── API Endpoints / Fail-over ───────────────────────────────────
API_CLUSTER_ORDER=JAG,PAL,BAR,FUN

# ─── DiskCache ───────────────────────────────────────────────────
DISKCACHE_NO_GZIP=
DISKCACHE_PURGE_OLDER_THAN=2592000
DISKCACHE_JANITOR_INTERVAL=3600

# ─── Logging ─────────────────────────────────────────────────────
LOG_LEVEL=INFO
LOG_DIR=./logs
LOG_ROTATION=100 MB
LOG_RETENTION=30 days
LOG_COMPRESSION=zip
RICH_THEME=monokai

# ─── Cache ───────────────────────────────────────────────────────
HOST_CACHE_DIR=.cache/host_candidates
HOST_CACHE_TTL=86400

# ─── Optional: Testing ───────────────────────────────────────────
# TEST_DATABASE_URL=postgresql://test_user:test_password@localhost:5432/pff_test
